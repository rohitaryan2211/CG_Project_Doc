\hypertarget{_mesh_8cpp_source}{}\doxysection{Mesh.\+cpp}
\label{_mesh_8cpp_source}\index{D:/Project1/Mesh.cpp@{D:/Project1/Mesh.cpp}}
\mbox{\hyperlink{_mesh_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_mesh_8h}{Mesh.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00003}\mbox{\hyperlink{class_mesh_a3a7b7bb4a172a517e86e197b267f324d}{00003}} \mbox{\hyperlink{class_mesh_a3a7b7bb4a172a517e86e197b267f324d}{Mesh::Mesh}}(std::vector <Vertex>\& vertices, std::vector <GLuint>\& indices, std::vector <Texture>\& textures)}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00011}00011     }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00012}00012     \mbox{\hyperlink{class_mesh_a6465a888c97232a39e12aad008c969c3}{Mesh::vertices}} = \mbox{\hyperlink{class_mesh_a6465a888c97232a39e12aad008c969c3}{vertices}};}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00013}00013     \mbox{\hyperlink{class_mesh_a5e55b84c6c967608bcf23ed7d68e4215}{Mesh::indices}} = \mbox{\hyperlink{class_mesh_a5e55b84c6c967608bcf23ed7d68e4215}{indices}};}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00014}00014     \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{Mesh::textures}} = \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{textures}};}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00016}00016     }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00017}00017     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_a7e9333d9696005783f8d1074d6b54003}{Bind}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00018}00018     \textcolor{comment}{// Generates Vertex Buffer Object and links it to vertices}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00019}00019     \mbox{\hyperlink{class_v_b_o}{VBO}} \mbox{\hyperlink{class_v_b_o}{VBO}}(\mbox{\hyperlink{class_mesh_a6465a888c97232a39e12aad008c969c3}{vertices}});}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00020}00020     \textcolor{comment}{// Generates Element Buffer Object and links it to indices}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00021}00021     \mbox{\hyperlink{class_e_b_o}{EBO}} \mbox{\hyperlink{class_e_b_o}{EBO}}(\mbox{\hyperlink{class_mesh_a5e55b84c6c967608bcf23ed7d68e4215}{indices}});}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00022}00022     \textcolor{comment}{// Links VBO attributes such as coordinates and colors to VAO}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00023}00023     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_ad6f646c98448d9c8a3d1ad198af0532f}{LinkAttrib}}(\mbox{\hyperlink{class_v_b_o}{VBO}}, 0, 3, GL\_FLOAT, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_vertex}{Vertex}}), (\textcolor{keywordtype}{void}*)0);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00024}00024     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_ad6f646c98448d9c8a3d1ad198af0532f}{LinkAttrib}}(\mbox{\hyperlink{class_v_b_o}{VBO}}, 1, 3, GL\_FLOAT, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_vertex}{Vertex}}), (\textcolor{keywordtype}{void}*)(3 * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00025}00025     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_ad6f646c98448d9c8a3d1ad198af0532f}{LinkAttrib}}(\mbox{\hyperlink{class_v_b_o}{VBO}}, 2, 3, GL\_FLOAT, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_vertex}{Vertex}}), (\textcolor{keywordtype}{void}*)(6 * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00026}00026     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_ad6f646c98448d9c8a3d1ad198af0532f}{LinkAttrib}}(\mbox{\hyperlink{class_v_b_o}{VBO}}, 3, 2, GL\_FLOAT, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_vertex}{Vertex}}), (\textcolor{keywordtype}{void}*)(9 * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00027}00027     \textcolor{comment}{// Unbind all to prevent accidentally modifying them}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00028}00028     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_a494321f165270d2294b5ece8bf431959}{Unbind}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00029}00029     \mbox{\hyperlink{class_v_b_o}{VBO}}.\mbox{\hyperlink{class_v_b_o_a4b3db8676fbf6dd90d47ed91cafb0abb}{Unbind}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00030}00030     \mbox{\hyperlink{class_e_b_o}{EBO}}.\mbox{\hyperlink{class_e_b_o_aeaba495af304f0a3a42d041aec49a759}{Unbind}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00031}00031 \}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00033}\mbox{\hyperlink{class_mesh_ad426ffcf04c7df2631f492a80e06d738}{00033}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_mesh_ad426ffcf04c7df2631f492a80e06d738}{Mesh::Draw}}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00034}00034 (}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00035}00035     \mbox{\hyperlink{class_shader}{Shader}}\& shader,}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00036}00036     \mbox{\hyperlink{class_camera}{Camera}}\& camera,}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00037}00037     glm::mat4 matrix,}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00038}00038     glm::vec3 translation,}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00039}00039     glm::quat rotation,}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00040}00040     glm::vec3 scale}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00041}00041 ) \{}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00042}00042     }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00044}00044     }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00045}00045     }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00046}00046     \textcolor{comment}{// Bind shader to be able to access uniforms}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00047}00047     shader.\mbox{\hyperlink{class_shader_a4315a6336472b293392aa50e7a4e65d0}{Activate}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00048}00048     \mbox{\hyperlink{class_v_a_o}{VAO}}.\mbox{\hyperlink{class_v_a_o_a7e9333d9696005783f8d1074d6b54003}{Bind}}();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00050}00050     \textcolor{comment}{// Keep track of how many of each type of textures we have}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00051}00051     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} numDiffuse = 0;}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00052}00052     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} numSpecular = 0;}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00054}00054     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{textures}}.size(); i++)}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00055}00055     \{}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00056}00056         std::string num;}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00057}00057         std::string type = \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{textures}}[i].type;}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00058}00058         \textcolor{keywordflow}{if} (type == \textcolor{stringliteral}{"{}diffuse"{}})}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00059}00059         \{}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00060}00060             num = std::to\_string(numDiffuse++);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00061}00061         \}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00062}00062         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (type == \textcolor{stringliteral}{"{}specular"{}})}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00063}00063         \{}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00064}00064             num = std::to\_string(numSpecular++);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00065}00065         \}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00066}00066         \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{textures}}[i].texUnit(shader, (type + num).c\_str(), i);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00067}00067         \mbox{\hyperlink{class_mesh_abf1e672703bf4f8e104f3b076faaf958}{textures}}[i].Bind();}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00068}00068     \}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00069}00069     \textcolor{comment}{// Take care of the camera Matrix}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00070}00070     glUniform3f(glGetUniformLocation(shader.\mbox{\hyperlink{class_shader_a7be2afcbd5ba5873a04536a2b4b5e576}{ID}}, \textcolor{stringliteral}{"{}camPos"{}}), camera.\mbox{\hyperlink{class_camera_a9733b59f5340f6f1bca24d52a6679039}{Position}}.x, camera.\mbox{\hyperlink{class_camera_a9733b59f5340f6f1bca24d52a6679039}{Position}}.y, camera.\mbox{\hyperlink{class_camera_a9733b59f5340f6f1bca24d52a6679039}{Position}}.z);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00071}00071     camera.\mbox{\hyperlink{class_camera_ae54a64c6b63804e101289cff12874445}{Matrix}}(shader, \textcolor{stringliteral}{"{}camMatrix"{}});}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00073}00073     \textcolor{comment}{// Initialize matrices}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00074}00074     glm::mat4 trans = glm::mat4(1.0f);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00075}00075     glm::mat4 rot = glm::mat4(1.0f);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00076}00076     glm::mat4 sca = glm::mat4(1.0f);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00078}00078     \textcolor{comment}{// Transform the matrices to their correct form}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00079}00079     trans = glm::translate(trans, translation);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00080}00080     rot = glm::mat4\_cast(rotation);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00081}00081     sca = glm::scale(sca, scale);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00083}00083     \textcolor{comment}{// Push the matrices to the vertex shader}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00084}00084     glUniformMatrix4fv(glGetUniformLocation(shader.\mbox{\hyperlink{class_shader_a7be2afcbd5ba5873a04536a2b4b5e576}{ID}}, \textcolor{stringliteral}{"{}translation"{}}), 1, GL\_FALSE, glm::value\_ptr(trans));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00085}00085     glUniformMatrix4fv(glGetUniformLocation(shader.\mbox{\hyperlink{class_shader_a7be2afcbd5ba5873a04536a2b4b5e576}{ID}}, \textcolor{stringliteral}{"{}rotation"{}}), 1, GL\_FALSE, glm::value\_ptr(rot));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00086}00086     glUniformMatrix4fv(glGetUniformLocation(shader.\mbox{\hyperlink{class_shader_a7be2afcbd5ba5873a04536a2b4b5e576}{ID}}, \textcolor{stringliteral}{"{}scale"{}}), 1, GL\_FALSE, glm::value\_ptr(sca));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00087}00087     glUniformMatrix4fv(glGetUniformLocation(shader.\mbox{\hyperlink{class_shader_a7be2afcbd5ba5873a04536a2b4b5e576}{ID}}, \textcolor{stringliteral}{"{}model"{}}), 1, GL\_FALSE, glm::value\_ptr(matrix));}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00089}00089     \textcolor{comment}{// Draw the actual mesh}}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00090}00090     glDrawElements(GL\_TRIANGLES, \mbox{\hyperlink{class_mesh_a5e55b84c6c967608bcf23ed7d68e4215}{indices}}.size(), GL\_UNSIGNED\_INT, 0);}
\DoxyCodeLine{\Hypertarget{_mesh_8cpp_source_l00091}00091 \}}

\end{DoxyCode}
