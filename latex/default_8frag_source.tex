\hypertarget{default_8frag_source}{}\doxysection{default.\+frag}
\label{default_8frag_source}\index{D:/Project1/default.frag@{D:/Project1/default.frag}}
\mbox{\hyperlink{default_8frag}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00001}00001 \#version 330 core}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00003}00003 // Outputs colors in RGBA}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00004}00004 out vec4 FragColor;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00006}00006 // Imports the current position from the Vertex Shader}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00007}00007 in vec3 crntPos;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00008}00008 // Imports the normal from the Vertex Shader}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00009}00009 in vec3 Normal;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00010}00010 // Imports the color from the Vertex Shader}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00011}00011 in vec3 color;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00012}00012 // Imports the texture coordinates from the Vertex Shader}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00013}00013 in vec2 texCoord;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00014}00014 // Imports the fragment position of the light}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00015}00015 in vec4 fragPosLight;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00019}00019 // Gets the Texture Units from the main function}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00020}00020 uniform sampler2D diffuse0;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00021}00021 uniform sampler2D specular0;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00022}00022 uniform sampler2D shadowMap;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00023}00023 // Gets the color of the light from the main function}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00024}00024 uniform vec4 lightColor;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00025}00025 // Gets the position of the light from the main function}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00026}00026 uniform vec3 lightPos;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00027}00027 // Gets the position of the camera from the main function}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00028}00028 uniform vec3 camPos;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00031}00031 vec4 pointLight()}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00032}00032 \{   }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00033}00033     // used in two variables so I calculate it here to not have to do it twice}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00034}00034     vec3 lightVec = lightPos -\/ crntPos;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00036}00036     // intensity of light with respect to distance}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00037}00037     float dist = length(lightVec);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00038}00038     float a = 3.0;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00039}00039     float b = 0.7;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00040}00040     float inten = 1.0f / (a * dist * dist + b * dist + 1.0f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00042}00042     // ambient lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00043}00043     float ambient = 0.20f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00045}00045     // diffuse lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00046}00046     vec3 normal = normalize(Normal);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00047}00047     vec3 lightDirection = normalize(lightVec);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00048}00048     float diffuse = max(dot(normal, lightDirection), 0.0f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00050}00050     // specular lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00051}00051     float specular = 0.0f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00052}00052     if (diffuse != 0.0f)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00053}00053     \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00054}00054         float specularLight = 0.50f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00055}00055         vec3 viewDirection = normalize(camPos -\/ crntPos);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00056}00056         vec3 halfwayVec = normalize(viewDirection + lightDirection);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00057}00057         float specAmount = pow(max(dot(normal, halfwayVec), 0.0f), 16);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00058}00058         specular = specAmount * specularLight;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00059}00059     \};}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00061}00061     return (texture(diffuse0, texCoord) * (diffuse * inten + ambient) + texture(specular0, texCoord).r * specular * inten) * lightColor;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00062}00062 \}}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00064}00064 vec4 direcLight()}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00065}00065 \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00066}00066     // ambient lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00067}00067     float ambient = 0.20f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00069}00069     // diffuse lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00070}00070     vec3 normal = normalize(Normal);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00071}00071     vec3 lightDirection = normalize(lightPos);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00072}00072     float diffuse = max(dot(normal, lightDirection), 0.0f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00074}00074     // specular lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00075}00075     float specular = 0.0f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00076}00076     if (diffuse != 0.0f)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00077}00077     \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00078}00078         float specularLight = 0.50f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00079}00079         vec3 viewDirection = normalize(camPos -\/ crntPos);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00080}00080         vec3 halfwayVec = normalize(viewDirection + lightDirection);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00081}00081         float specAmount = pow(max(dot(normal, halfwayVec), 0.0f), 16);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00082}00082         specular = specAmount * specularLight;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00083}00083     \};}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00086}00086     // Shadow value}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00087}00087     float shadow = 0.0f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00088}00088     // Sets lightCoords to cull space}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00089}00089     vec3 lightCoords = fragPosLight.xyz / fragPosLight.w;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00090}00090     if(lightCoords.z <= 1.0f)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00091}00091     \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00092}00092         // Get from [-\/1, 1] range to [0, 1] range just like the shadow map}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00093}00093         lightCoords = (lightCoords + 1.0f) / 2.0f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00094}00094         float currentDepth = lightCoords.z;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00095}00095         // Prevents shadow acne}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00096}00096         float bias = max(0.025f * (1.0f -\/ dot(normal, lightDirection)), 0.0005f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00097}00097     }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00098}00098         // Smoothens out the shadows using PCF}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00099}00099         int sampleRadius = 2;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00100}00100         vec2 pixelSize = 1.0 / textureSize(shadowMap, 0);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00101}00101         for(int y = -\/sampleRadius; y <= sampleRadius; y++)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00102}00102         \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00103}00103             for(int x = -\/sampleRadius; x <= sampleRadius; x++)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00104}00104             \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00105}00105                 float closestDepth = texture(shadowMap, lightCoords.xy + vec2(x, y) * pixelSize).r;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00106}00106                 if (currentDepth > closestDepth + bias)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00107}00107                     shadow += 1.0f;     }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00108}00108             \}    }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00109}00109         \}}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00110}00110         // Get average shadow}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00111}00111         shadow /= pow((sampleRadius * 2 + 1), 2);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00112}00112     }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00113}00113     \}}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00115}00115     return (texture(diffuse0, texCoord) * (diffuse * (1.0f -\/ shadow) + ambient) + texture(specular0, texCoord).r * specular  * (1.0f -\/ shadow)) * lightColor;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00116}00116 \}}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00117}00117 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00118}00118 vec4 spotLight()}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00119}00119 \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00120}00120     // controls how big the area that is lit up is}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00121}00121     float outerCone = 0.90f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00122}00122     float innerCone = 0.95f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00124}00124     // ambient lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00125}00125     float ambient = 0.20f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00127}00127     // diffuse lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00128}00128     vec3 normal = normalize(Normal);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00129}00129     vec3 lightDirection = normalize(lightPos -\/ crntPos);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00130}00130     float diffuse = max(dot(normal, lightDirection), 0.0f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00132}00132     // specular lighting}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00133}00133     float specular = 0.0f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00134}00134     if (diffuse != 0.0f)}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00135}00135     \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00136}00136         float specularLight = 0.50f;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00137}00137         vec3 viewDirection = normalize(camPos -\/ crntPos);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00138}00138         vec3 halfwayVec = normalize(viewDirection + lightDirection);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00139}00139         float specAmount = pow(max(dot(normal, halfwayVec), 0.0f), 16);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00140}00140         specular = specAmount * specularLight;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00141}00141     \};}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00142}00142 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00143}00143     // calculates the intensity of the crntPos based on its angle to the center of the light cone}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00144}00144     float angle = dot(vec3(0.0f, -\/1.0f, 0.0f), -\/lightDirection);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00145}00145     float inten = clamp((angle -\/ outerCone) / (innerCone -\/ outerCone), 0.0f, 1.0f);}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00146}00146 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00147}00147     return (texture(diffuse0, texCoord) * (diffuse * inten + ambient) + texture(specular0, texCoord).r * specular * inten) * lightColor;}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00148}00148 \}}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00149}00149 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00151}00151 void main()}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00152}00152 \{}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00153}00153     // outputs final color}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00154}00154     FragColor = direcLight();}
\DoxyCodeLine{\Hypertarget{default_8frag_source_l00155}00155 \}}

\end{DoxyCode}
